# 6장 동작하는 소프트웨어

> 점점 더 많은 회사들이 훌륭한 개발자들과의 협력적인 관계 속에서 일을 하는 것이 얼마나 중요한지 깨닫고 있다.

솔직히 우리나라 회사들도 깨달았으면 하는 바램이 크다.

그리고 책에 언급한건 소프트웨어 엔지니어 혹은 장인의 기준에서 얘기한 부분이다. 소프트웨어 분석, 설계가 된 문서 잘 정리된 요구사항 역시 중요하다고 보는 입장인데, 책에서 언급한 건 극단적인 개발자 하청을 통한 프로젝트에 대한 얘기를 한 것 같다.

## 동작하는 소프트웨어만으로는 부족하다

마지막 단락은 질문만 가득한데 느낌상 '왜 테스트 코드를 작성하지 않지?'의 느낌이 강하다.

## 정원 돌보기

실용주의 프로그래머(The Pragmatic Programmer)에서 인용했듯이

> 프로그래밍은 집을 짓는다기보다는 정원을 돌보는 것에 더 가깝다

라고 했다.

이 말을 이해하려면 코드를 짜고, 테스트를 통과하고, 다시 유지보수를 하고, 리팩토링도 해 가면서 내가 작성한 코드를 오래 만져보고 (그리고 내가 똥떵어리를 만들었구나 느끼기도 하면서) 경험해 보는 과정이라고 생각한다.

또 내가 좋아할만한 내용을 또 인용해 보자면

> 잘못된 설계, 테스트 부족, ...

아무도 하지 않지만 이론에만 존재하는 이것들, 소프트웨어 장인을 얘기한다고 해서 피해갈 수 없는 중요한 것들이다.

## 보이지 않는 위협

이거 스타워즈 영화 에피소드1의 제목이기도 한데 영화와는 전혀 상관은 없고 퀄리티 낮은 그러니까 빨리 만들어진 나쁜 코드들이 쌓여서 프로젝트 후반부에 가면 구현 시간이 점점 더 시간이 오래 걸린다는 걸 얘기한다.

나는 '빨리' 보다는 '잘(생각해서)' 만든 코드를 선호한다.

또 테스트 코드가 있는 편을 선호한다.

왜냐하면 책에 언급한대로 단타로 치고 끝내는 1회성 프로젝트는 상관 없겠지만, 2년 3년 만들어 나가는 소프트웨어 제품의 경우는 별 생각 없이 빨리 만들어 나가면 나중에 손쓸 틈도 없이 힘들어하는 경우를 겪었기 때문에 그렇다.

나는 언젠가 내가 얘기하는 '잘(생각해서)' 만들어야 한다는 뜻을 이해하는 사람이 있었으면 좋겠다. 한국 사람의 특징인지는 모르겠지만 빨리 하면 잘 하는 것으로 인식되는 것도 그렇게 좋아 보이지 않기 때문이다.

### 자신이 만든 소프트웨어에 인질이 되는 상황

내가 생각하는 부분과 거의 일치하는 부분이 여기서 나온다.

> 개발자가 별도의 리팩토링 시간을 요구한다는 것은 과거에 이런 저런 이유로 코드를 대충 작성한 부분이 있다는 뜻이기도 하다.

나 역시도 리팩토링 하는 시간을 따로 가져야 한다고 생각하는 개발자는 처음부터 막 만들었다는 뜻이기도 하고, 스스로 '저는 처음부터 아무 생각 없이 코드를 짰습니다' 라고 고백하는 뜻이기도 하다.

### 평범한 개발자가 아닌 장인을 고용하라

과연 장인'만' 고용해서 팀을 꾸릴 수 있을까? 하는 의문이 든다. 물론 되도록이면 정원 가꾸기를 할 줄 아는 개발자라면 좋겠지만 그런 개발자들로 이루어진 팀이라면 드림팀에 가깝지 않을까? 하는 생각이 든다.

## 시간에 대한 잘못된 인식

### 기술적 부채에 대한 이야기

기능 구현이 우선이다 == 기술적 부채가 쌓여간다
나중에 리팩토링과 유닛 테스트를 하면 된다 == 여태까지 그렇게 해본 적이 없다

### 우리는 올바른 것을 하길 원한다

> 빨리 하는 것과 허술한 것은 다르다.

일정의 압박으로 빨리 하는게 올바르게 하는 것은 아니라는 뜻.

아마 내가 빨리 하는 걸 안좋아한다는 얘기도 이 책에서 나온 얘기일 것이다. 빨리 보다는 잘 만들어야 한다.

### 시간적 여유가 없는 바쁜 팀

단위 테스트를 작성할 수 없는 문제로 발생한 일화.

> "이 부분은 정말 중요하기 때문에 빨리 끝내야 해서 테스트 코드를 작성할 시간이 없습니다."

하필 테스트 코드를 작성하지 않아서 생기는 문제를 산드로 만쿠소 아저씨에게 걸리다니, 운이 없다고 생각할 수 있지만

원래 단위 테스트 코드는 바빠도 작성해야 한다(고 믿고 싶다) 책에 나온 일화 처럼 코드 조금 수정하고 로그 넣고, 출력하고 빌드하고 확인하는 오랜 시간은 테스트 코드를 작성했다면 걸리지 않을 시간이기 때문이다.

### 내겐 없는 여유, 다른 누군가에겐 있는 여유

계속해서 테스트 코드의 중요성에 대해 강려크하게 전달하는 내용.

QA 팀에서 버그를 찾지 못해야 하는게 맞다고 하는데, 나도 사실 그렇다고 생각한다. 개발 된 내용이 이미 QA에서 나올 내용이라는 것 정도는 개발자도 QA 팀에 전달하기 전에 어느 정도 알고 있기 때문이다.

그리고 테스트 코드의 순기능으로 코드 디버깅 하는 시간이 줄어든다고 하는데 이것도 경험해 본 바 어느 정도 맞는 이야기이기도 하다.

### 단위 테스트 작성은 별개의 업무인가

별개의 업무가 아님을 자세하게 주장하고 있다.

여기서 팀 단위에서의 합의가 있다면, 기능 구현 완료에 단위 테스트 구현 및 테스트 완료가 포함되어야 한다는 얘기가 나온다. 나도 우리팀에 이렇게 적용하고 있다. 모든 팀원이 다 하고 있지는 않아서 아직 기간이 더 필요하긴 하지만.

### 효율적인 시간 활용

> 수동 테스트, 디버깅, 오래 걸리는 빌드, 까다로운 애플리케이션 배포(deploy), 복잡한 프로젝트 개발 환경 설정 같은 것에 시간을 덜 빼앗길수록 애플리케이션의 품질에 더 신경을 쓸 수 잇고 고객을 행복하게 할 수 있다.

어느 정도 자동화에 대한 욕구가 있으면 좋다고 본다. 또 이 내용을 구두가 아닌 문서로 전달할 수 있는 능력이 있으면 더 좋을 것이다.

반복적으로 하는 부분에 시간을 빼앗기지 않는다면 더 효율적인 시간 활용이 가능하다는 부분은 전적으로 동의한다.

### 몇 개월 후

실제로 테스트 프레임워크 그리고 배포 자동화를 만든 팀이 역량있는 팀이 되었다는 훈훈한 이야기.

내용 자체는 훈훈하긴 하지만, 아직 현실 세계에서 이런거 잘 한다고 칭찬 받아보거나 잘 한다는 얘기는 아직 들어보지 못했다. 아니 그런 얘기 안들어도 된다. 책에 언급한 테스트 코드 작성은 당연히 해야 하는 것이라고 생각하고 있으니까.

## 레거시 코드

새로 하는 프로젝트는 언제나 재밌다.

그래서 나 역시도 솔루션 제품 개발하는 일 보다는 프로젝트로 일정 기간 새롭게 하는 일을 더 선호한다. 여기서 얘기하는 그린필드 프로젝트를 선호하는 것과 마찬가지 이유이다.

### 태도의 변화

이 부분이 그래도 현실적인 부분에 상당히 부합하는 내용이라 공감이 많이 됐다.

레거시 코드의 경우 문서 업데이트도 안되어 있는 경우도 많기 떄문에 결국 동작하는 코드를 기반으로 책에 언급한 것 처럼 직소퍼즐을 맞춰 나가는 형태로 조금씩 이해해 나가는 방향이 맞는 방향이라고 얘기한다.

뼈있는 내용을 인용해 본다.

> 남이 작성한 코드를 엉망이라고 그냥 말하기는 쉽다. 심지어 비웃을 수도 있다. 하지만 나라면 더 잘 만들 수 있는가? 라고 스스로에게 물어보아야 한다.

나는 이게 아주 좋은 마음가짐이라고 본다. 남이 잘하고 못하고를 얘기할 게 아니라 나는 잘 하고 있는가?를 되묻고 그렇지 않기 위해 코드를 개선하고 잘 만들 생각을 하는게 훨씬 더 좋다고 보기 때문이다.

### 고객과 개발자 모두의 만족

우와

> 일을 즐길 수 있느냐 없느냐는 우리의 태도에 달려 있다.

이 정도 경지에 오르려면 얼마만큼 일을 많이 해봐야 할까? 이것도 정해져 있지 않기에 마음 먹기에 따라 다르다고 할 수 있겠지?

## 요약

딱 한문장에 대해 인용해 보려 한다.

> 소프트웨어의 품질이 좋지 않을수록 변경하기기 더 어려워진다.

소프트웨어의 품질은 왜 좋지 않느냐? 제대로 잘 만들 생각을 안하고 빨리 보이는데로 하려고 하기 때문이라고 본다.

이에 대한 이해를 돕기 위해 마지막 단락도 인용해 본다.

> 회사와 개발자들은 정기적으로 도끼날을 가는 시간이 낭비가 아니라는 사실을 이해해야 한다. 바로 그것이 시간을 절약하고 끊임없이 빨리 움직일 수 있는 최선의 방법이다.

이제 해야할 걸 해야 한다고 본다. 테스트 코드? 왜 안짜는가? 잘 만들어진 인터페이스 기반의 설계? 왜 안하는가?

안하고 있다면 진짜 진심으로 반성해야 한다고 본다.