## 5장. 테스트 주도 개발

### 서두

밥 아저씨가 처음 TDD의 세계에 입문하게 된 이야기가 나오는데 신기했다. TDD를 창시하게 된 이유가 누군가로부터 영감을 얻어서였다니! 
밥 아저씨가 했던 개발 방식(대부분의 개발자가 하고 있는 프로세스)와 TDD의 프로세스를 비교하는데 흥미롭다.

1. 기존 방식 : 코딩 → 컴파일 → 오류 잡기 반복
2. TDD : 테스트 코드 작성 → 구현을 반복

2번이 훨씬 반복 주기가 빠르다고 한다. 2번의 핵심은 짧은 시간(30초) 안에 테스트 코드 작성과 구현을 반복하는 것인데 대체 어느 정도로 작은 단위로 구현을 하고 테스트를 해야 저게 가능할지 가늠이 안된다.
저 경지에 오를 수 있을지는 확신할 수 없지만 우선 테스트 코드 작성 후 설계 프로세스 만큼은 꼭 한번 도전해보고 싶다. 

### TDD의 세 가지 법칙

TDD에 법칙이 있다는 사실에 놀랐다. 아래 세 가지 법칙을 보면서 TDD에 대해 잘 아는 사람이라면 당연 수긍이 되는 내용일 것이다.

1. 실패한 단위 테스트를 만들기 전에는 제품 코드를 만들지 않는다.
2. 컴파일이 안되거나 실패한 단위 테스트가 있으면 더 이상의 단위 테스트를 만들지 않는다.
3. 실패한 단위 테스트를 통과하는 이상의 제품 코드는 만들지 않는다.

흥미로운 것은 모든 법칙이 "~하지 않는다"로 끝난다는 점인데 그만큼 위 원칙에 진심이 느껴졌다. 
위의 3가지 원칙을 지켜야 진정한 TDD다고 이야기 할 수 있을 것 같은데 생각보다 무시무시하다.
제품 코드를 만들기 위해 5주 동안 문서 작업을 했던 시간을 생각해보면 그래도 양반인가 싶기도 하지만 무튼 핵심은 "테스트 코드 없이 제품 코드 만들지 마라"인 것 같다. 
이렇게 제품 코드를 만들기 위해서는 많은 훈련이 필요할 것 같다. 문득 든 생각은 앞으로 멘토님과 진행하는 프로젝트를 위와 같은 방법으로 작업해보면 어떨까 싶기도 하다. 
먼가 자극이 필요했는데 이렇게 스스로 동기 부여하면 다시 프로젝트를 하고 싶은 마음이 들지 않을까?

### 수많은 해택
- 확신
  테스트 코드를 짜면 얻을 수 있는 가장 큰 장점이자 해택인 것 같다. 적어도 내가 원하는 결과를 얻어내기 위해 코드를 정확히 짰다는 확신이 선다는 것은 정말 큰 장점 아닐까?

- 결함 주입 비율
  결함 주입 비율이란 코드 추가 시 새로운 결함을 만드는 비율이라고 한다. 기존에 테스트 코드 기반 위에 새로운 코드를 짜고 테스트를 돌리면 곧 바로 어떤 문제가 있는지 확인할 수 있기 때문에 새로운 결함을 획기적으로 낮출 수 있을 것 같다.

- 용기
  코드 수정에 용기가 필요하다 정말. 내가 잘못 건드려서 프로그래밍이 망가지면 어쩌지란 불안감을 안고 가는 것 같다. 그래서 최대한 안전하게 코드를 짜려고 기존의 코드는 건들지 않고 코드를 덧붙이다 보면 어느세 코드가 지저분해진다. 그래서 테스트 코드가 있다면 뒤에 든든히 보증을 서주는 느낌이랄까? 내가 수정해서 잘못 짜더라도 어떤 부분이 잘못되었는지 바로 알려주기 때문에 두려움 없이 코드 수정을 하게 된다.

- 문서화
  테스트 코드가 잘 짜여져 있다면 반드시 특정 로직을 검증하기 위해 짰을 것이고 해당 로직을 검증하는 과정을 잘 살펴보면 해당 로직을 잘 이해할 수 있다는 것을 이야기 해준다. 단위 테스트 자체가 문서가 될 수 있다는 점에 놀라웠고 누군가가 내가 짠 테스트 코드만 봐도 해당 로직을 이해할 수 있다면 진짜 TDD를 마스터 했다고 이야기할 수 있지 않을까?

- 설계
  좋은 테스트 코드를 짜기 위해 객체 의존성을 줄여야하고 그러기 위해서는 설계를 잘 해야한다고 한다. 아직 의존성을 낮추는 것이 좋은 설계와 어떤 관계가 있는지 잘 모르겠다. 
  다만 이해가 되는건 특정 메서드를 실행할 때 다른 객체의 도움이 필요한 경우라면 해당 객체 또한 테스트를 거쳐야하기 때문에 테스트 하기가 쉽지 않을 것 같다. 테스트를 하는 메서드는 최대한 독립적이어야한다는 것을 이야기 하는 것일까?
  
- 프로다운 선택
  너무 당연한 이야기인 것 같아서 고개를 끄덕이며 넘어간다.

### TDD와 관련 없는 사실
약간 김이 빠지는 이야기가 나온다. 대상이 무엇이던 너무 맹신하는 태도는 지양해야한다는 관점으로 이야기를 하는 것 같다. 결국 개발자의 판단인 것 같다. 어떤 상황에서 어떤 것을 적용하는 것이 효율적이고 효과적인지를 스스로 판단할 줄 알아야한다고 한다. 무지성 신입 개발자로서는 그냥 시키는대로 하고 싶은데 역시 프로의 길은 멀고도 멀다.
