# Ch06. 예측 가능한 코드를 작성하라

## 중요 문장

1. 일반적으로 매직 값을 반환하면 예측을 벗어날 위험이 있으므로 사용하지 않는 것이 바람직하다.
2. 함수에서 매직값을 반환할 때의 문제점은 호출하는 쪽에서 함수 계약의 세부 조항을 알아야 한다는 점이다.
3. 매직 값은 예측을 벗어나는 결과를 초래할 수 있기 때문에 발생 가능한 상황에 대해 조심하는 것이 좋다. 매직값 보다는 널값이나 옵셔널을 반환하거나 오류 전달 기술을 사용하는 것이 간단하고 효과적인 대안이다.
4. 널 객체패턴은 여러 형태로 나타날 수 있다. 이것을 사용하거나 접할 때 그것이 정말 적절한지 아니면 예상을 벗어나는 동작을 할 가능성이 있는지에 대해 의식적으로 생각해봐야 한다.
5. 부수 효과는 어떤 함수의 호출이 함수 외부에 초래한 상태 변화를 의미한다.
6. 어떤 함수가 부수효과를 일으킨다면, 그 함수를 호출하는 쪽에서 이 사실에 대해 명백하게 알 수 있도록 하는 책임이 함수의 작성자에게 있다.
7. 코드를 명확하게 작성하는 것의 이점은 코드를 몇줄 더 추가하는 비용을 훨씬 더 능가한다.
8. 직관적이지 않거나 예상을 벗어나는 코드에 숨어있는 오류를 테스트 만으로는 방지하기 어렵다.

## 내 생각

- 책에서도 잘 설명해주었지만, 특정 의미를 담은 매직 값을 반환하게 되면 예측을 벗어날 위험이 생길 수 밖에 없다 예를들어서, 책에서 처럼, 한 프로젝트 내에서 어떤 오류의 경우로 -1 를 리턴하기로 했다고 가정했을 때, 어떤 함수에서 음수를 리턴할 수 있는 경우라면, 모르는 사람이 봤을 때는 이게 정확하게 결과가 리턴이 된 것인지, 오류의 상황인 것인지 헷갈릴 수 있다
- 책에서 나오는 널 객체 패턴을 보면, 널을 반환하는 것으로 인해 생기는 널 검사 코드를 제거하기 위해서, 일종의 꼼수를 쓰는걸로 보인다 상황에 따라서 적절하게 활용해볼 수 있다고 판단되지만, 많은 경우에는 그냥 널을 검사하는게 오해의 소지를 줄이고 예측 가능한 코드를 만드는데 더 도움이 되지 않을까? 라는 생각이다
- 어떤 함수 혹은 메소드에 부수효과가 존재한다면, 많은 경우에 SRP를 충족하지 못하는 경우가 있을 것 같다. 이럴 경우에는 최대한 하나의 책임을 가지도록 조정해주는 것이 필요하다.
- 추가될 열거 값에 대한 처리를 switch case로 명시적으로 표시하고, default는 에러를 일으켜서 인지할 수 있도록 하는 것은 꽤 좋은 방법처럼 보인다 나 같은 경우에는 책에서 처럼 암묵적으로 if~else 로 나누어서 처리하는 경우가 많은데 이유는 새로운 열거 값이 추가됨으로써 발생한 수정에 대해서는 후에 열거값이 더 추가되는 경우가 생각보다 그렇게 많진 않고(점점 확장해 나가는 형태가 아닌이상..) 추가되더라도, 추가됨으로써 영향이 될 수 있는 부분은 모두 살펴보기 때문이다. 저자의 의견은 그럼에도 불구하고, 명시적으로 하나씩 표시하고, 예외를 발생 시켜서 실수를 드러내도록 하자는 의견으로 보인다
- 이 챕터의 전반적인 내용들은 흔히 가독성의 영역에서 말하는 내용들의 연장선이라고 생각된다 예측을 잘되게 하기 위해서는 오해를 하지 않도록 해야하는데, 오해를 하지 않게 작성하려면 명시적이고, 명확하게 의도를 드러낼 수 있도록 작성을 해야한다

## 질문

1. 책에서 나오는 여러 예측 가능하지 않은 코드 작성 사례 중에 본인이 실제 당해보았거나, 문제가 생긴 일에 대해서 공유해보면 좋을 것 같습니다